import React, { useState, useEffect, useRef } from ‘react’;
import { Play, Pause, Volume2, VolumeX, Maximize, Search, Clock } from ‘lucide-react’;

const ITVerseStreaming = () => {
const [currentEpisode, setCurrentEpisode] = useState(null);
const [isPlaying, setIsPlaying] = useState(false);
const [volume, setVolume] = useState(1);
const [isMuted, setIsMuted] = useState(false);
const [currentTime, setCurrentTime] = useState(0);
const [duration, setDuration] = useState(0);
const [searchQuery, setSearchQuery] = useState(’’);
const videoRef = useRef(null);

const episodes = [
{ id: 1, title: ‘Episódio 1’, desc: ‘A chegada do mal’, thumb: ‘ep1’, videoId: ‘DEMO_VIDEO_1’ },
{ id: 2, title: ‘Episódio 2’, desc: ‘Desaparecimentos’, thumb: ‘ep2’, videoId: ‘DEMO_VIDEO_2’ },
{ id: 3, title: ‘Episódio 3’, desc: ‘O esgoto’, thumb: ‘ep3’, videoId: ‘DEMO_VIDEO_3’ },
{ id: 4, title: ‘Episódio 4’, desc: ‘Memórias perdidas’, thumb: ‘ep4’, videoId: ‘DEMO_VIDEO_4’ },
{ id: 5, title: ‘Episódio 5’, desc: ‘A casa de Neibolt’, thumb: ‘ep5’, videoId: ‘DEMO_VIDEO_5’ },
{ id: 6, title: ‘Episódio 6’, desc: ‘Confronto’, thumb: ‘ep6’, videoId: ‘DEMO_VIDEO_6’ },
{ id: 7, title: ‘Episódio 7’, desc: ‘O ritual’, thumb: ‘ep7’, videoId: ‘DEMO_VIDEO_7’ },
{ id: 8, title: ‘Episódio 8’, desc: ‘Final’, thumb: ‘ep8’, videoId: ‘DEMO_VIDEO_8’ }
];

// Salvar progresso no localStorage
useEffect(() => {
const savedProgress = localStorage.getItem(‘itverse-progress’);
if (savedProgress && !currentEpisode) {
const progress = JSON.parse(savedProgress);
setCurrentEpisode(episodes.find(ep => ep.id === progress.episodeId));
setCurrentTime(progress.time);
}
}, []);

useEffect(() => {
if (currentEpisode && currentTime > 0) {
localStorage.setItem(‘itverse-progress’, JSON.stringify({
episodeId: currentEpisode.id,
time: currentTime
}));
}
}, [currentTime, currentEpisode]);

const selectEpisode = (episode) => {
setCurrentEpisode(episode);
setCurrentTime(0);
setIsPlaying(true);
};

const togglePlay = () => {
if (videoRef.current) {
if (isPlaying) {
videoRef.current.pause();
} else {
videoRef.current.play();
}
setIsPlaying(!isPlaying);
}
};

const toggleMute = () => {
if (videoRef.current) {
videoRef.current.muted = !isMuted;
setIsMuted(!isMuted);
}
};

const handleVolumeChange = (e) => {
const newVolume = parseFloat(e.target.value);
setVolume(newVolume);
if (videoRef.current) {
videoRef.current.volume = newVolume;
}
};

const handleTimeUpdate = () => {
if (videoRef.current) {
setCurrentTime(videoRef.current.currentTime);
setDuration(videoRef.current.duration);
}
};

const handleSeek = (e) => {
const rect = e.currentTarget.getBoundingClientRect();
const pos = (e.clientX - rect.left) / rect.width;
const newTime = pos * duration;
if (videoRef.current) {
videoRef.current.currentTime = newTime;
setCurrentTime(newTime);
}
};

const formatTime = (seconds) => {
if (!seconds || isNaN(seconds)) return ‘0:00’;
const mins = Math.floor(seconds / 60);
const secs = Math.floor(seconds % 60);
return `${mins}:${secs.toString().padStart(2, '0')}`;
};

const toggleFullscreen = () => {
if (videoRef.current) {
if (videoRef.current.requestFullscreen) {
videoRef.current.requestFullscreen();
}
}
};

return (
<div style={{
backgroundColor: ‘#0A0A0A !important’,
minHeight: ‘100vh’,
color: ‘#E8E8E8’,
fontFamily: ‘-apple-system, BlinkMacSystemFont, “Segoe UI”, sans-serif’
}}>
<style>{`
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

```
    body {
      background: #0A0A0A !important;
      overflow-x: hidden;
    }

    .blood-drip {
      position: relative;
      display: inline-block;
    }

    .blood-drip::after {
      content: '';
      position: absolute;
      bottom: -5px;
      left: 50%;
      width: 2px;
      height: 8px;
      background: #8B0000;
      animation: drip 3s ease-in-out infinite;
    }

    @keyframes drip {
      0%, 100% { height: 0; opacity: 0; }
      50% { height: 12px; opacity: 1; }
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.8; }
      50% { opacity: 1; }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    .glow-red {
      box-shadow: 0 0 20px rgba(139, 0, 0, 0.5) !important;
      transition: all 0.3s ease !important;
    }

    .glow-red:hover {
      box-shadow: 0 0 40px rgba(139, 0, 0, 0.8) !important;
      transform: translateY(-5px) !important;
    }

    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      background: #2D0000 !important;
      height: 4px;
      border-radius: 2px;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 12px;
      height: 12px;
      background: #8B0000 !important;
      cursor: pointer;
      border-radius: 50%;
    }

    input[type="range"]::-moz-range-thumb {
      width: 12px;
      height: 12px;
      background: #8B0000 !important;
      cursor: pointer;
      border-radius: 50%;
      border: none;
    }

    .search-input {
      background: #2D0000 !important;
      border: 1px solid #500000 !important;
      color: #E8E8E8 !important;
      padding: 8px 12px;
      border-radius: 4px;
      outline: none;
      transition: all 0.3s ease;
    }

    .search-input:focus {
      border-color: #8B0000 !important;
      box-shadow: 0 0 10px rgba(139, 0, 0, 0.3) !important;
    }

    .video-container {
      position: relative;
      width: 100%;
      background: #000 !important;
      border-radius: 8px;
      overflow: hidden;
      border: 2px solid #500000 !important;
    }

    .demo-video {
      width: 100%;
      aspect-ratio: 16/9;
      background: linear-gradient(135deg, #1a0000 0%, #0a0000 100%) !important;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      color: #8B0000 !important;
      font-weight: bold;
    }
  `}</style>

  {/* HEADER */}
  <header style={{
    background: 'linear-gradient(180deg, #0A0A0A 0%, #1A0000 100%) !important',
    padding: '20px 40px',
    borderBottom: '2px solid #500000 !important',
    position: 'sticky',
    top: 0,
    zIndex: 1000
  }}>
    <div style={{ maxWidth: '1400px', margin: '0 auto', display: 'flex', alignItems: 'center', justifyContent: 'space-between', flexWrap: 'wrap', gap: '20px' }}>
      <h1 className="blood-drip" style={{
        fontSize: '36px',
        color: '#8B0000 !important',
        fontWeight: 'bold',
        letterSpacing: '2px',
        textShadow: '0 0 20px rgba(139, 0, 0, 0.8), 0 0 40px rgba(139, 0, 0, 0.4)',
        animation: 'pulse 2s ease-in-out infinite'
      }}>
        ITVERSE
      </h1>

      <nav style={{ display: 'flex', gap: '30px', alignItems: 'center' }}>
        <a href="#inicio" style={{ color: '#E8E8E8', textDecoration: 'none', fontSize: '16px', transition: 'color 0.3s' }}>Início</a>
        <a href="#episodios" style={{ color: '#B0B0B0', textDecoration: 'none', fontSize: '16px', transition: 'color 0.3s' }}>Episódios</a>
      </nav>

      <div style={{ position: 'relative', display: 'flex', alignItems: 'center' }}>
        <Search size={18} style={{ position: 'absolute', left: '12px', color: '#8B0000' }} />
        <input
          type="text"
          placeholder="Buscar episódios..."
          className="search-input"
          value={searchQuery}
          onChange={(e) => setSearchQuery(e.target.value)}
          style={{ paddingLeft: '40px', width: '250px' }}
        />
      </div>
    </div>
  </header>

  {/* HERO SECTION */}
  <section style={{
    background: 'linear-gradient(180deg, rgba(45, 0, 0, 0.8) 0%, rgba(10, 10, 10, 0.95) 100%), url("data:image/svg+xml,%3Csvg width=\'100\' height=\'100\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M50 0 L60 40 L100 50 L60 60 L50 100 L40 60 L0 50 L40 40 Z\' fill=\'%238B0000\' opacity=\'0.03\'/%3E%3C/svg%3E") !important',
    padding: '100px 40px',
    textAlign: 'center',
    borderBottom: '3px solid #500000 !important'
  }}>
    <div style={{ maxWidth: '800px', margin: '0 auto' }}>
      <h2 style={{
        fontSize: '56px',
        color: '#8B0000 !important',
        fontWeight: 'bold',
        marginBottom: '20px',
        textShadow: '0 0 30px rgba(139, 0, 0, 0.9)',
        letterSpacing: '3px'
      }}>
        BEM-VINDOS A DERRY
      </h2>
      
      <p style={{
        fontSize: '18px',
        color: '#B0B0B0',
        marginBottom: '40px',
        lineHeight: '1.6'
      }}>
        Uma criança desaparece. Então outra. E outra. Na pequena cidade de Derry, o mal assume a forma dos seus piores pesadelos. Pennywise retorna a cada 27 anos para se alimentar do medo das crianças.
      </p>

      <button
        onClick={() => selectEpisode(episodes[0])}
        className="glow-red"
        style={{
          background: '#8B0000 !important',
          color: '#E8E8E8',
          border: 'none',
          padding: '16px 40px',
          fontSize: '18px',
          fontWeight: 'bold',
          borderRadius: '6px',
          cursor: 'pointer',
          display: 'inline-flex',
          alignItems: 'center',
          gap: '10px'
        }}
      >
        <Play size={20} fill="#E8E8E8" />
        ASSISTIR AGORA
      </button>
    </div>
  </section>

  {/* VIDEO PLAYER */}
  {currentEpisode && (
    <section id="player" style={{
      padding: '60px 40px',
      background: '#0A0A0A !important'
    }}>
      <div style={{ maxWidth: '1400px', margin: '0 auto' }}>
        <h3 style={{ fontSize: '24px', color: '#8B0000 !important', marginBottom: '20px', fontWeight: 'bold' }}>
          {currentEpisode.title} - {currentEpisode.desc}
        </h3>

        <div className="video-container">
          <div className="demo-video">
            <div style={{ textAlign: 'center' }}>
              <Clock size={64} style={{ marginBottom: '20px', opacity: 0.5 }} />
              <p style={{ fontSize: '18px', marginBottom: '10px' }}>PLAYER DEMO</p>
              <p style={{ fontSize: '14px', opacity: 0.7 }}>
                Substitua este elemento por:<br/>
                &lt;iframe src="https://drive.google.com/file/d/SEU_VIDEO_ID/preview"<br/>
                allow="autoplay" style="width:100%;aspect-ratio:16/9"&gt;&lt;/iframe&gt;
              </p>
            </div>
          </div>

          {/* CONTROLES */}
          <div style={{
            background: '#2D0000 !important',
            padding: '15px 20px',
            display: 'flex',
            alignItems: 'center',
            gap: '15px',
            borderTop: '1px solid #500000 !important'
          }}>
            <button
              onClick={togglePlay}
              style={{
                background: 'transparent',
                border: 'none',
                color: '#E8E8E8',
                cursor: 'pointer',
                display: 'flex',
                alignItems: 'center'
              }}
            >
              {isPlaying ? <Pause size={24} /> : <Play size={24} />}
            </button>

            <div style={{
              flex: 1,
              height: '4px',
              background: '#500000 !important',
              borderRadius: '2px',
              cursor: 'pointer',
              position: 'relative'
            }}
            onClick={handleSeek}>
              <div style={{
                width: `${(currentTime / duration) * 100 || 0}%`,
                height: '100%',
                background: '#8B0000 !important',
                borderRadius: '2px'
              }} />
            </div>

            <span style={{ fontSize: '14px', color: '#B0B0B0', minWidth: '100px' }}>
              {formatTime(currentTime)} / {formatTime(duration)}
            </span>

            <button
              onClick={toggleMute}
              style={{
                background: 'transparent',
                border: 'none',
                color: '#E8E8E8',
                cursor: 'pointer',
                display: 'flex',
                alignItems: 'center'
              }}
            >
              {isMuted ? <VolumeX size={24} /> : <Volume2 size={24} />}
            </button>

            <input
              type="range"
              min="0"
              max="1"
              step="0.1"
              value={volume}
              onChange={handleVolumeChange}
              style={{ width: '100px' }}
            />

            <button
              onClick={toggleFullscreen}
              style={{
                background: 'transparent',
                border: 'none',
                color: '#E8E8E8',
                cursor: 'pointer',
                display: 'flex',
                alignItems: 'center'
              }}
            >
              <Maximize size={24} />
            </button>
          </div>
        </div>
      </div>
    </section>
  )}

  {/* EPISÓDIOS */}
  <section id="episodios" style={{
    padding: '60px 40px',
    background: 'linear-gradient(180deg, #0A0A0A 0%, #1A0000 100%) !important'
  }}>
    <div style={{ maxWidth: '1400px', margin: '0 auto' }}>
      <h3 style={{
        fontSize: '32px',
        color: '#8B0000 !important',
        marginBottom: '40px',
        fontWeight: 'bold',
        textShadow: '0 0 20px rgba(139, 0, 0, 0.6)'
      }}>
        TODOS OS EPISÓDIOS
      </h3>

      <div style={{
        display: 'grid',
        gridTemplateColumns: 'repeat(auto-fill, minmax(280px, 1fr))',
        gap: '30px'
      }}>
        {episodes.filter(ep => 
          ep.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
          ep.desc.toLowerCase().includes(searchQuery.toLowerCase())
        ).map((episode) => (
          <div
            key={episode.id}
            className="glow-red"
            style={{
              background: '#2D0000 !important',
              borderRadius: '8px',
              overflow: 'hidden',
              cursor: 'pointer',
              border: '2px solid #500000 !important'
            }}
            onClick={() => {
              selectEpisode(episode);
              document.getElementById('player')?.scrollIntoView({ behavior: 'smooth' });
            }}
          >
            <div style={{
              aspectRatio: '16/9',
              background: 'linear-gradient(135deg, #1a0000 0%, #0a0000 100%) !important',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              fontSize: '48px',
              color: '#500000 !important',
              fontWeight: 'bold'
            }}>
              {episode.id}
            </div>

            <div style={{ padding: '20px' }}>
              <h4 style={{ fontSize: '18px', color: '#E8E8E8', marginBottom: '8px', fontWeight: 'bold' }}>
                {episode.title}
              </h4>
              <p style={{ fontSize: '14px', color: '#B0B0B0', marginBottom: '15px' }}>
                {episode.desc}
              </p>
              <button style={{
                background: '#8B0000 !important',
                color: '#E8E8E8',
                border: 'none',
                padding: '10px 20px',
                borderRadius: '4px',
                fontSize: '14px',
                fontWeight: 'bold',
                cursor: 'pointer',
                width: '100%'
              }}>
                Assistir
              </button>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  {/* FOOTER */}
  <footer style={{
    background: '#0A0A0A !important',
    borderTop: '2px solid #500000 !important',
    padding: '40px',
    textAlign: 'center'
  }}>
    <p style={{ color: '#500000', fontSize: '14px' }}>
      © 2025 ITVERSE. Todos os direitos reservados. Você flutuará também.
    </p>
  </footer>
</div>
```

);
};

export default ITVerseStreaming;
